<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>promise</title>
</head>
<body>
    <script>
        // console.log('hello');
        // setTimeout(() =>console.log('Bye'),3000);
        // console.log('hello again');


        function goToSchool(){
            console.log('학교에 값니다.');
        }
        function arriveAtSchool_w(){

            setTimeout(()=>console.log('걸어서 학교 도착'),1000);
        }

        function study(){
            console.log('공부합시당');    
        }
        
        function arriveAtSchool_r(){
            return new Promise(function(resolve){
                setTimeout(function(){
                    console.log('달려서 학교 도착');
                    resolve();
                },1000);
            })
        }
        // goToSchool();
        // arriveAtSchool_r().then(()=>study());
        // arriveAtSchool_w();
        // study();

        function arriveAtSchool_ra(){
            return new Promise(function(resolve,reject){
                setTimeout(function(){
                    var status = Math.floor(Math.random()*2);
                    if(status===1){
                        resolve('학교에 도착');
                    } else {
                        reject('중간에 사고 발생~!!!');
                    }
                },1000);
            })
        }
        function cure(){
            console.log('병원으로 가자! 서둘러!');
        }

        goToSchool();
        arriveAtSchool_ra()
            .then(function(msg){
                console.log(msg)
                study();
            })
            .catch(function(ac){
                console.log(ac);
                cure();
            });

        function devide(num1,num2){
            return new Promise((resolve,reject)=>{
                if(num2==0){
                    reject(new Error("Unable to devide by 0."));
                } else {
                    resolve(num1/num2);
                }
            });
        }
        devide(8,2).then(res=>{
            console.log('정상',res);
            return res;
        }).then(tran=>{
            console.log('두번째',triple(tran));
        }).catch(err=>console.log('에러',err));


        function triple(num){
            return num*3;
        }

    </script>
</body>
</html>